<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>8-Bit Caf√© ‚Äì Orders</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Barlow:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header class="navbar">
    <div class="logo">8-Bit Caf√©</div>
    <button class="hamburger" aria-label="Open navigation" aria-expanded="false">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
<nav class="nav-links" role="navigation" aria-label="Main navigation">
<nav class="nav-links">
  <a class="nav-btn" href="about.html">ABOUT</a>
  <a class="nav-btn" href="menu-coffee.html">MENU</a>
  <a class="nav-btn" href="index.html">HOME</a>
  <a class="nav-btn" href="orders.html">ORDERS</a>
  <a class="nav-btn" href="location.html">LOCATION</a>
</nav> 
  </header>

  <main class="content-container">
    <section class="page coffee-bean-bg">
      <div class="menu-bar pixel-bar">ORDERS</div>

      <div class="orders-grid">
        <div class="card orders-summary">
          <h3 class="card-title">SUMMARY</h3>
          <div id="order-items-list">
            <p class="empty-cart">Your cart is empty. Add items from the menu!</p>
          </div>
        </div>

        <div class="card orders-total">
          <h3 class="card-title">TOTAL</h3>
          <div id="total-items-list">
            <p class="empty-total">No items yet</p>
          </div>

          <hr class="pixel-hr">
          <div class="total-line grand-total" id="grand-total">= 0.00 $</div>
          <button class="place-order-btn" id="placeOrderBtn">PLACE ORDER</button>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="footer-inner">
      <div>¬© 2025 8-Bit Caf√©</div>
      <div class="socials">üåê ‚Ä¢ ‚òï ‚Ä¢ üéÆ</div>
    </div>
  </footer>

  <script>
    // Cart functions
    function getCart() {
      try {
        const cart = localStorage.getItem('cafe_cart');
        return cart ? JSON.parse(cart) : {};
      } catch (e) {
        console.error('Error loading cart:', e);
        return {};
      }
    }

    function saveCart(cart) {
      try {
        localStorage.setItem('cafe_cart', JSON.stringify(cart));
        renderOrders();
      } catch (e) {
        console.error('Error saving cart:', e);
      }
    }

    function updateQuantity(itemName, delta) {
      const cart = getCart();
      if (cart[itemName]) {
        cart[itemName].quantity += delta;
        if (cart[itemName].quantity <= 0) {
          delete cart[itemName];
          showNotification(`Removed ${itemName}`);
        } else {
          showNotification(`Updated ${itemName}`);
        }
        saveCart(cart);
      }
    }

    function clearCart() {
      localStorage.removeItem('cafe_cart');
      renderOrders();
      showNotification('Cart cleared! üóëÔ∏è');
    }

    function renderOrders() {
      const cart = getCart();
      const items = Object.entries(cart);
      
      const orderItemsList = document.getElementById('order-items-list');
      const totalItemsList = document.getElementById('total-items-list');
      const grandTotalEl = document.getElementById('grand-total');

      if (items.length === 0) {
        orderItemsList.innerHTML = '<p class="empty-cart">Your cart is empty. Add items from the menu!</p>';
        totalItemsList.innerHTML = '<p class="empty-total">No items yet</p>';
        grandTotalEl.textContent = '= 0.00 $';
        return;
      }

      // Render order items
      orderItemsList.innerHTML = items.map(([name, data]) => `
        <div class="order-item">
          <span class="item-text">${name}</span>
          <div class="quantity-controls">
            <button class="control-btn" onclick="updateQuantity('${name.replace(/'/g, "\\'")}', -1)">‚àí</button>
            <span class="item-quantity">${data.quantity}</span>
            <button class="control-btn" onclick="updateQuantity('${name.replace(/'/g, "\\'")}', 1)">+</button>
          </div>
          <span class="item-price">${(data.price * data.quantity).toFixed(2)}$</span>
        </div>
      `).join('');

      // Render totals
      totalItemsList.innerHTML = items.map(([name, data]) => `
        <div class="total-line">
          <span>${name} x${data.quantity}</span>
          <span>${(data.price * data.quantity).toFixed(2)}$</span>
        </div>
      `).join('');

      // Grand total
      const grandTotal = items.reduce((sum, [_, data]) => sum + (data.price * data.quantity), 0);
      grandTotalEl.textContent = `= ${grandTotal.toFixed(2)} $`;
    }

    function showNotification(message) {
      const existing = document.querySelector('.notification');
      if (existing) existing.remove();

      const notification = document.createElement('div');
      notification.className = 'notification';
      notification.textContent = message;
      document.body.appendChild(notification);

      setTimeout(() => notification.classList.add('show'), 10);
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => notification.remove(), 300);
      }, 2000);
    }

    // Place order
    document.getElementById('placeOrderBtn').onclick = () => {
      const cart = getCart();
      const items = Object.entries(cart);
      
      if (items.length === 0) {
        showNotification('Cart is empty! üõí');
        return;
      }

      const total = items.reduce((sum, [_, data]) => sum + (data.price * data.quantity), 0);
      showNotification(`Order placed! Total: $${total.toFixed(2)} üéâ`);
      
      setTimeout(() => {
        clearCart();
        showNotification('Thank you! ‚òï');
      }, 1500);
    };

    // Mobile nav
    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');
    
    if (hamburger && navLinks) {
      hamburger.onclick = () => {
        const isOpen = navLinks.classList.contains('open');
        navLinks.classList.toggle('open');
        hamburger.setAttribute('aria-expanded', !isOpen);
      };
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      renderOrders();
      console.log('Orders page loaded, cart:', getCart());
    });
  </script>
</body>
</html>
